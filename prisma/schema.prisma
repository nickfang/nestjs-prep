generator client {
  provider = "prisma-client-js"
}

generator nestjsDto {
  provider = "prisma-generator-nestjs-dto"
  output = "../dist/dto"
  outputToNestJsResourceStructure = "true"
  schemaPath = "test" // disable swagger
}

// for viewing on something like dbdiagram.io
generator dbml {
  provider = "prisma-dbml-generator"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Recipes {
  id          Int @id @default(autoincrement())
  name        String
  instructions String
  description String?
  servings    Int? @default(1)
  deletedAt DateTime? // Nullable or indicate soft delete
  archivedAt DateTime? // Nullable to indicate archive
  recipeIngredients RecipeIngredients[]
}

model Ingredients {
  id   Int    @id @default(autoincrement())
  name String @unique
  recipeIngredients RecipeIngredients[]
}

model RecipeIngredients {
  recipe   Recipes @relation(fields: [recipeId], references: [id])
  recipeId Int
  ingredient   Ingredients @relation(fields: [ingredientId], references: [id])
  ingredientId Int
  quantity Float
  unit     String

  @@id([recipeId, ingredientId])
}